// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

enum Operator {
  RYANAIR
  WIZZAIR
  TRANSAVIA
}

type Connection {
  code     String
  operator Operator
}

model Airport {
  id          String       @id @default(uuid()) @map("_id")
  code        String       @unique
  name        String
  countryName String
  countryCode String
  latitude    Float
  longitude   Float
  connections Connection[]
}

model Fare {
  id          String   @id @default(uuid()) @map("_id")
  origin      String
  destination String
  date        DateTime
  price       Float
  currency    String
  operator    Operator

  @@unique([origin, destination, date, operator])
}

enum ServiceStatusCode {
  IN_PROGRESS
  SUCCESS
  ERROR
}

model ServiceStatus {
  id       String            @id @default(uuid()) @map("_id")
  code     ServiceStatusCode
  startAt  Int
  endAt    Int?
  operator Operator
  error    String?
  details  String?
}
